---
schemaVersion: "2.0.0"
commandTests:
  - name: "Erlang version"
    command: erl
    args:
      - -noshell
      - -eval
      - io:format("~s~n", [erlang:system_info(otp_release)]), init:stop().
    expectedOutput: ["22"]
  - name: "Joxa executable"
    command: sh
    args:
      - -eu
      - -c
      - |
        cat <<JOXA > test.jxa
        (ns test (require erlang io))
        (defn+ test () (io/format "~p~n" [(erlang/system_info :otp_release)]))
        JOXA
        joxa test.jxa
        erl -noshell -eval 'code:load_abs("./test.beam"), test:test(), init:stop().'
    expectedOutput: ['"22"']
